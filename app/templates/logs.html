<div class="flex flex-col h-full bg-gray-800 rounded-lg shadow-xl overflow-hidden" id="logs-container">
    <!-- Header with Filters -->
    <div class="flex flex-wrap justify-between items-center p-3 bg-gray-900 border-b border-gray-700">
        <div class="flex items-center gap-2 mb-2 sm:mb-0">
            <span class="text-sm font-mono text-gray-400">ID: {{ container_id[:12] }}</span>
        </div>

        <form class="flex flex-wrap items-center gap-2" hx-get="/containers/{{ host_name }}/{{ container_id }}/logs"
            hx-target="#logs-container" hx-swap="outerHTML" hx-indicator="#loading-spinner">

            <!-- Range/Tail Selector Input -->
            <input type="number" name="tail" value="{{ tail }}" placeholder="Строк (1000)" title="Строк"
                class="bg-gray-800 text-gray-200 text-xs py-1 px-2 rounded border border-gray-600 focus:border-blue-500 outline-none w-20">

            <!-- Start Time -->
            <input type="datetime-local" name="since" value="{{ since|default('', true) }}" title="Начало"
                class="bg-gray-800 text-gray-200 text-xs py-1 px-2 rounded border border-gray-600 focus:border-blue-500 outline-none">

            <span class="text-gray-500">-</span>

            <!-- End Time -->
            <input type="datetime-local" name="until" value="{{ until|default('', true) }}" title="Конец"
                class="bg-gray-800 text-gray-200 text-xs py-1 px-2 rounded border border-gray-600 focus:border-blue-500 outline-none">

            <!-- Search -->
            <input type="text" name="search" value="{{ search|default('', true) }}" placeholder="Поиск текста..."
                class="bg-gray-800 text-gray-200 text-xs py-1 px-2 rounded border border-gray-600 focus:border-blue-500 outline-none w-28">

            <button type="submit"
                class="bg-blue-700 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs transition flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                Найти
            </button>
            <div id="loading-spinner" class="htmx-indicator ml-2">
                <svg class="animate-spin h-4 w-4 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                    </path>
                </svg>
            </div>
        </form>

        <div class="flex gap-2">
            <a href="/containers/{{ host_name }}/{{ container_id }}/logs?download=true&tail={{ tail }}&since={{ since|default('', true) }}&until={{ until|default('', true) }}&search={{ search|default('', true) }}"
                target="_blank" download="logs.txt"
                class="bg-gray-700 hover:bg-gray-600 text-gray-200 px-3 py-1 rounded text-xs flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Скачать
            </a>
            <button onclick="document.getElementById('logs-modal').classList.add('hidden')"
                class="text-gray-400 hover:text-white transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>

    <div
        class="bg-black p-4 overflow-auto flex-1 font-mono text-xs text-gray-300 leading-relaxed whitespace-pre h-[60vh] custom-scrollbar">
        {{ logs }}
    </div>
</div>