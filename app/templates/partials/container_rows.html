{% for c in containers %}
<tr class="hover:bg-gray-700/30 transition" data-container-id="{{ c.id }}">
    <!-- Status -->
    <td class="px-4 py-3 whitespace-nowrap status-cell">
        <div class="flex items-center gap-2">
            {% if 'running' in c.state|lower %}
            <span
                class="w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"></span>
            {% else %}
            <span class="w-2.5 h-2.5 rounded-full bg-red-500"></span>
            {% endif %}
            <div class="flex flex-col">
                <span class="text-xs text-white uppercase font-bold">{{ c.state }}</span>
                <span class="text-[10px] text-gray-400 font-mono">{{ c.status }}</span>
            </div>
        </div>
    </td>

    <!-- Name -->
    <td class="px-4 py-3">
        <div class="flex flex-col">
            <span class="font-semibold text-white truncate max-w-[180px]" title="{{ c.name }}">{{ c.name }}</span>
            <span class="text-[10px] text-gray-500 font-mono">{{ c.id }}</span>
        </div>
    </td>

    <!-- Image -->
    <td class="px-4 py-3">
        <div class="max-w-[200px]">
            {% set image_parts = c.image.split(':') %}
            {% set image_name = image_parts[0].split('/')[-1] if '/' in image_parts[0] else image_parts[0] %}
            {% set image_tag = image_parts[1] if image_parts|length > 1 else 'latest' %}
            <span class="text-gray-300 text-xs font-mono truncate block" title="{{ c.image }}">{{ image_name }}</span>
            <span class="text-[10px] text-purple-400 font-mono">:{{ image_tag }}</span>
        </div>
    </td>

    <!-- Created -->
    <td class="px-4 py-3 text-gray-400 text-xs font-mono whitespace-nowrap">
        {{ c.created }}
    </td>

    <!-- Ports -->
    <td class="px-4 py-3">
        {% if c.ports %}
        <div class="flex flex-wrap gap-1 max-w-[180px]">
            {% for port in c.ports.split(', ') %}
            <span
                class="px-1.5 py-0.5 bg-blue-900/30 text-blue-300 rounded text-[10px] font-mono border border-blue-800/50">
                {{ port }}
            </span>
            {% endfor %}
        </div>
        {% else %}
        <span class="text-gray-600 text-xs">‚Äî</span>
        {% endif %}
    </td>

    <!-- Host -->
    <td class="px-4 py-3">
        <span class="px-2 py-0.5 bg-gray-700 text-blue-300 rounded text-xs font-mono">{{ c.host }}</span>
    </td>

    <!-- Actions -->
    <td class="px-4 py-3">
        <div class="flex items-center justify-end gap-1">
            {% if c.compose_path %}
            <form hx-post="/compose/action" hx-swap="none" class="inline"
                hx-confirm="–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç Compose (down && up -d)?">
                <input type="hidden" name="host_name" value="{{ c.host }}">
                <input type="hidden" name="path" value="{{ c.compose_path }}">
                <button type="submit" name="action" value="restart"
                    class="bg-blue-900/50 hover:bg-blue-800 text-blue-200 px-2 py-1 rounded border border-blue-800 transition text-[10px] font-bold"
                    title="–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ü—Ä–æ–µ–∫—Ç">
                    ‚¨á‚¨Ü
                </button>
            </form>
            {% endif %}

            <button hx-get="/containers/{{c.host}}/{{c.id}}/logs" hx-target="#modal-content" hx-trigger="click"
                onclick="document.getElementById('log-modal').showModal()"
                class="text-gray-400 hover:text-white transition p-1 hover:bg-gray-700 rounded" title="–õ–æ–≥–∏">
                üìú
            </button>

            {% if 'running' in c.state|lower %}
            <button hx-post="/containers/{{c.host}}/{{c.id}}/stop" hx-swap="none"
                class="text-red-500 hover:text-red-400 transition p-1 hover:bg-gray-700 rounded" title="–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å">
                ‚õî
            </button>
            {% else %}
            <button hx-post="/containers/{{c.host}}/{{c.id}}/start" hx-swap="none"
                class="text-green-500 hover:text-green-400 transition p-1 hover:bg-gray-700 rounded" title="–ó–∞–ø—É—Å—Ç–∏—Ç—å">
                ‚ñ∂Ô∏è
            </button>
            {% endif %}

            <button hx-post="/containers/{{c.host}}/{{c.id}}/restart" hx-swap="none"
                class="text-yellow-500 hover:text-yellow-400 transition p-1 hover:bg-gray-700 rounded"
                title="–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å">
                üîÑ
            </button>
        </div>
    </td>
</tr>
{% else %}
<tr>
    <td colspan="7" class="px-4 py-8 text-center text-gray-500">
        <div class="flex flex-col items-center gap-2">
            <span class="text-3xl">üì≠</span>
            <span>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</span>
            <span class="text-xs text-gray-600">–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Å—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π</span>
        </div>
    </td>
</tr>
{% endfor %}